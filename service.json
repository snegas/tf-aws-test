[
  {
    "image": "imega/mysql-client",
    "name": "svc-container",
    "logConfiguration": {
                "logDriver": "awslogs",
                "options": {
                    "awslogs-region" : "us-east-1",
                    "awslogs-group" : "stream-to-log-fluentd",
                    "awslogs-stream-prefix" : "svc"
                }
            },
    "secrets": [{
        "name": "MYSQL_USER_NAME",
        "valueFrom": "${aws_secretsmanager_secret.secret_rds.arn}:uname::"
    },
    {
        "name": "MYSQL_USER_PASSWORD",
        "valueFrom": "${aws_secretsmanager_secret.secret_rds.arn}:upass::"
    }
    ],
    "environment": [
            {
                "name": "PING_INTERVAL",
                "value": "${var.ping_interval}"
            },
            {
                "name": "MYSQL_HOSTNAME",
                "value": "${aws_db_instance.database.address}"
            },
            {
                "name": "MYSQL_CONN",
                "value": "-u ${MYSQL_USER_NAME} -p${MYSQL_USER_PASSWORD} -h ${MYSQL_HOSTNAME}"
            }
    ],
    "entrypoint":["mysqladmin","--protocol=TCP","-i", "3600", "-w3", "-s", "${MYSQL_CONN}"] 
    }
]
